<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>response::json()</title>
<link href="style.css" rel="stylesheet">
</head>

<body>

<article>
<header>
<h1>response::json()</h1>
<nav><a href="./"><img src="back.svg" width="24" height="24" title="ホームに戻る"></a></nav>
</header>
<div id="contents">

<p>JSONを出力して、PHPを終了する</p>

<table class="function">
<tr><th>引数</th><th>説明</th></tr>
<tr class="require"><td>1</td><td>
JSONに変換するデータ。配列や連想配列など
</td></tr>
<tr class="option"><td>2</td><td>
設定があれば連想配列で(後述)
</td></tr>
<tr class="return"><td>戻</td><td>
なし
</td></tr>
</table>


<my-code class="php" data-title="使用例"><!--
//JavaScript側
var xhr = new XMLHttpRequest();
xhr.open("GET", "http://www.example.com/test.php");
xhr.onload = function(){
    console.dir(JSON.parse(xhr.responseText)); //JSONを受け取る
};
xhr.send();

//PHP側
<?php
response::json([1,2,3,4,5]); //JSONを出力する
--></my-code>


<h3>JSONの設定</h3>

<table>
<tr><th>キー</th><th>値</th></tr>
<tr><td>origin</td><td>
Access-Control-Allow-Originヘッダの値。<br>
初期値はアクセス元のオリジン。ヘッダを出力しないならfalse
</td></tr>
<tr><td>credentials</td><td>
Access-Control-Allow-Credentialsヘッダの値。<br>
初期値はtrue。ヘッダを出力しないならfalse<br>

クッキーが送信されない場合は、初期値にして、JavaScript側では<br>
XHRなら<var>xhr.withCredentials</var>をtrueに<br>
fetchなら第二引数に<var>{mode:'cors', credentials:'include'}</var>
</td></tr>
</table>


</div>
</article>

<script src="script.js"></script>
</body>
</html>