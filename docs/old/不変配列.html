<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>不変配列クラス</title>
  <link href="programming.css" rel="stylesheet">
</head>
<body>

<header>
<h1>不変配列クラス</h1>
</header>



<article id="使い方">
<h1>使い方</h1>

<p>不変配列クラスは、キーに対して値を1度だけ代入できる配列みたいなものを作ることができます<br>
PHPの定数は使いにくいので、その代わりに。</p>

<pre><cite>使い方</cite><!--
$設定 = new 不変配列;

$設定['key'] = 1;   //代入
$設定['key'] = 2;   //再代入不可
print $設定['key']; //1が表示される

unset($設定['key']); //消せない
isset($設定['key']); //true

foreach($設定 as $k => $v){ //$設定 はforeachで回せる
    print "$k:$v";          // key:1 が表示される
}
--></pre>

<p>new時に配列を渡すこともできます。既存の値が変更できなくなります</p>

<pre><cite>スーパーグローバル変数を不変にする</cite><!--
$_ENV = new 不変配列($_ENV);
--></pre>
<p>代入済みの全内容が欲しい時は、変数に()を付けて実行すると配列として得られます。<br>
もちろん普通の配列なので、値を変更できるようになります</p>

<pre><cite>使用例</cite><!--
$普通の配列 = $設定(); //全内容を配列で得る
--></pre>

</article>




<article id="多重配列のアクセス方法">
<h1>多重配列のアクセス方法</h1>
<p>不変配列では、多重配列に対してはドット記法を用いることでアクセスできます</p>

<pre><cite>ドット記法</cite><!--
$設定 = new 不変配列;

$設定['key.0'] = 'a'; //$設定['key'][0] と同等
$設定['key.1'] = 'b'; //$設定['key'][1] と同等
$設定['key.1'] = 'c'; //再代入不可

//$設定['key'] は配列になり [0=>'a', 1=>'b'] となる
--></pre>

<p>深い位置に対しても、再代入不可の性質は受け継がれます。<br>
不変配列の仕様上、PHPの標準文法では多重配列への代入ができないので、多重配列へのアクセスはドット記法をご利用ください</p>

<p>キー名におけるドットは区切り文字として使用するので名前には使えなくなりますが<br>
記法を変更することで回避可能です<var>$設定-&gt;記法('文字指定')</var></p>
</article>



<article id="仕様詳細">
<h1>仕様詳細</h1>

<ul>
  <li>未定義のキーにアクセスした時は null が返ります。エラーは発生しません</li>
  <li>代入済みのキーに再代入した時は何も起きません。エラーは発生しません</li>
  <li>空キーは仕様が決まってないので、使用しないでください。<small>例： [] [''] ['key.']</small></li>
</ul>

</article>

<footer>
<nav><a href="./">ホームに戻る</a></nav>
</footer>


<script src="programming.js"></script>

</body></html>